{"version":3,"sources":["webpack:///webpack/bootstrap bac6e469111d5c83ff51","webpack:///./app.ts","webpack:///./command.ts","webpack:///./contact.ts","webpack:///./util.ts","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./jsonfile.ts"],"names":[],"mappings":"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","file":"addressBook.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bac6e469111d5c83ff51\n **/","import {Command} from './command';\nimport {ContactFactory, JsonfileContactRepository} from './contact';\n\nlet command = new Command(new JsonfileContactRepository(), new ContactFactory());\n\nfunction handleError(err) {\n    if (err) {\n        console.log(err);\n    } else {\n        console.log('OK! The command ran successfully!');\n    }\n}\n\ncommand.executeCurrentOperation(handleError);\n\n\n\n/** WEBPACK FOOTER **\n ** ./app.ts\n **/","import {Contact, ContactFactory, ContactRepository} from \"./contact\";\n\nexport class Command {\n\n    constructor(private contactRepository: ContactRepository, private contactFactory: ContactFactory) {}\n\n    add(done) {\n        if (this.getOperation() !== 'add') {\n            return;\n        }\n\n        let data = this.getOperationData();\n\n        let name = this.parseName(data);\n        let number = this.parseNumber(data);\n\n        let contact = this.contactFactory.createContact(name, number);\n        this.contactRepository.saveContact(contact, done);\n    }\n\n    find(done) {\n        if (this.getOperation() !== 'find') {\n            return;\n        }\n\n        let data = this.getOperationData();\n\n        this.contactRepository.findContacts(data, function (err, data) {\n            if (err) {\n                return done(err);\n            }\n\n            data.forEach(function (contact: Contact) {\n                console.log(contact.name, contact.number);\n            });\n\n            done(null, data);\n        });\n    }\n\n    private getOperation() {\n        return process.argv[2];\n    }\n\n    private getOperationData() {\n        return process.argv[3];\n    }\n\n    private parseName (input): string {\n        return input.split(',')[0].trim();\n    }\n\n    private parseNumber (input) {\n        return input.split(',')[1].trim();\n    }\n\n    executeCurrentOperation(done) {\n        let operation = this.getOperation();\n\n        let command;\n        switch (operation) {\n            case \"add\":\n                command = this.add;\n                break;\n            case \"find\":\n                command = this.find;\n                break;\n            default:\n                command = function (done) {\n                    done('Invalid command!')\n                };\n        }\n\n        command.bind(this)(done);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./command.ts\n **/","import {Util} from \"./util\";\nimport {Jsonfile} from \"./jsonfile\";\n\nexport interface Contact {\n    name: string,\n    number: number\n}\n\nexport class ContactFactory {\n    createContact(name: string, number: number): Contact {\n        return {\n            name: name,\n            number: number\n        }\n    }\n}\n\nexport interface ContactRepository {\n    saveContact(contact: Contact, done);\n    findContacts (name: string, done);\n}\n\nexport class JsonfileContactRepository implements ContactRepository {\n\n    private jsonfile = new Jsonfile();\n\n    saveContact (contact, done) {\n        var that = this;\n\n        this.loadContacts(function (err, contacts: Contact[]) {\n            if (err) { return done(err); }\n            contacts.push(contact);\n            that.saveContacts(contacts, done);\n        });\n    }\n\n    findContacts (name: string, done) {\n\n        this.loadContacts(function (err, contacts) {\n            if (err) {\n                return done(err);\n            }\n\n            var byName = function (contact) {\n                return contact.name === name;\n            };\n\n            let result = contacts.filter(byName);\n            done(null, result);\n        });\n    }\n\n    private loadContacts (done) {\n        let jsonPath = Util.getDataPath();\n        this.jsonfile.readFile(jsonPath, done, null);\n    }\n\n    private saveContacts (contacts: Contact[], done) {\n        let jsonPath = Util.getDataPath();\n\n        this.jsonfile.writeFile(jsonPath, contacts, done, null);\n    }\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./contact.ts\n **/","import * as fs from \"fs\";\nimport * as path from \"path\";\n\nexport class Util {\n\n    static getHomeDirectory() {\n        return process.platform === 'win32'\n            ? process.env['USERPROFILE']\n            : process.env['HOME'];\n    };\n\n    static makeSureDataFileExists(dataPath) {\n        fs.exists(dataPath, function (exists) {\n            if (!exists) {\n                fs.writeFile(dataPath, '[]');\n            }\n        });\n    };\n\n    static getDataPath() {\n        var dataPath = path.join(this.getHomeDirectory(), './data.json');\n        this.makeSureDataFileExists(dataPath);\n\n        return dataPath;\n    };\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./util.ts\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 5\n ** module chunks = 0\n **/","import * as fs from \"fs\";\n\nexport class Jsonfile {\n\n    constructor(public spaces: string = null) {}\n\n    readFile (file, options, callback) {\n        if (callback == null) {\n            callback = options;\n            options = {};\n        }\n\n        fs.readFile(file, options, function (err, data) {\n            if (err) return callback(err);\n\n            let obj;\n            try {\n                obj = JSON.parse(data, options ? options.reviver : null)\n            } catch (err2) {\n                err2.message = `${file}: ${err2.message}`;\n                return callback(err2)\n            }\n\n            callback(null, obj)\n        });\n    }\n\n    writeFile (file, obj, options, callback) {\n        if (callback == null) {\n            callback = options;\n            options = {}\n        }\n\n        let spaces = typeof options === 'object' && options !== null\n            ? 'spaces' in options\n                ? options.spaces : this.spaces\n                : this.spaces;\n\n        let str = '';\n        try {\n            str = `${JSON.stringify(obj, options ? options.replacer : null, spaces)}\\n`\n        } catch (err) {\n            if (callback)\n                return callback(err, null)\n        }\n\n        fs.writeFile(file, str, options, callback)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./jsonfile.ts\n **/"],"sourceRoot":""}